(function(){"use strict";function e(e){this.el=e,this.image=this.el.previousElementSibling,this.current_frame=0,this.total_frames=60,this.path=new Array,this.length=new Array,this.handle=0,this.init()}function t(){var e=a.clientHeight,t=window.innerHeight;return e<t?t:e}function n(){return window.pageYOffset||a.scrollTop}function i(e){var t=0,n=0;do{isNaN(e.offsetTop)||(t+=e.offsetTop),isNaN(e.offsetLeft)||(n+=e.offsetLeft)}while(e=e.offsetParent);return{top:t,left:n}}function o(e,o){var r=e.offsetHeight,a=n(),s=a+t(),c=i(e).top,h=c+r;o=o||0;return c+r*o<=s&&h>=a}function r(){var t,n=Array.prototype.slice.call(document.querySelectorAll("#main svg")),i=new Array,r=!1;n.forEach(function(t,n){var r=new e(t);i[n]=r,setTimeout(function(e){return function(){o(e.parentNode)&&r.render()}}(t),250)});var a=function(){r||(r=!0,setTimeout(function(){s()},60))},s=function(){n.forEach(function(e,t){o(e.parentNode,.5)&&i[t].render()}),r=!1},c=function(){function e(){s(),t=null}t&&clearTimeout(t),t=setTimeout(e,200)};window.addEventListener("scroll",a,!1),window.addEventListener("resize",c,!1)}var a=window.document.documentElement;window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},window.cancelAnimFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(e){window.clearTimeout(e)},e.prototype.init=function(){var e=this;[].slice.call(this.el.querySelectorAll("path")).forEach(function(t,n){e.path[n]=t;var i=e.path[n].getTotalLength();e.length[n]=i,e.path[n].style.strokeDasharray=i+" "+i,e.path[n].style.strokeDashoffset=i})},e.prototype.render=function(){this.rendered||(this.rendered=!0,this.draw())},e.prototype.draw=function(){var e=this,t=this.current_frame/this.total_frames;if(t>1)window.cancelAnimFrame(this.handle),this.showImage();else{this.current_frame++;for(var n=0,i=this.path.length;n<i;n++)this.path[n].style.strokeDashoffset=Math.floor(this.length[n]*(1-t));this.handle=window.requestAnimFrame(function(){e.draw()})}},e.prototype.showImage=function(){classie.add(this.image,"show"),classie.add(this.el,"hide")},r()})();